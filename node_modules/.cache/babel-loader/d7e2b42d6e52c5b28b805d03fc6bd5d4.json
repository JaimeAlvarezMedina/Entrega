{"ast":null,"code":"var _jsxFileName = \"/root/easterworld/pruebas2/src/login.js\";\nimport React from 'react';\nimport './login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: \"\",\n      usuario: \"\",\n      contra: \"\",\n      error: \"\",\n      aux: \"\"\n    };\n    this.contrasena = this.c.bind(this);\n    this.user = this.u.bind(this);\n    this.iniciar = this.iniciar_sesion.bind(this);\n    this.registra = this.registrar.bind(this);\n  }\n\n  iniciar_sesion() {\n    //Comprueba que el usuario este en la base de datos y coincida con la contraseña\n    var datos = new FormData();\n    datos.append('usuario', this.state.usuario);\n    datos.append('contra', this.state.contra);\n    fetch(\"http://159.223.172.191/iniciar_sesion.php\", {\n      method: \"POST\",\n      body: datos\n    }).then(res => res.json()).then(result => {\n      if (result == \"Correcto\") {\n        localStorage.setItem(\"usuario\", this.state.usuario);\n        window.location.href = \"/foro\";\n      } else {\n        this.setState({\n          contra: \"\"\n        });\n        this.setState({\n          error: \"El usuario o contraseña no son correctos\"\n        });\n      }\n    }, error => {\n      console.log(error);\n    });\n  }\n\n  registrar() {\n    //Añade un usuario en la base de datos\n    var datos = new FormData();\n    datos.append('usuario', this.state.usuario);\n    datos.append('contra', this.state.contra);\n    fetch(\"http://159.223.172.191/anadir_usuario.php\", {\n      method: \"POST\",\n      body: datos\n    }).then(res => res.json()).then(result => {\n      if (result != \"Disponible\") {\n        this.setState({\n          error: \"El usuario no esta disponible\"\n        });\n      }\n\n      this.setState({\n        contra: \"\"\n      });\n    }, error => {\n      console.log(error);\n    });\n  }\n\n  u(event) {\n    //Para modificar el usuario\n    this.setState({\n      usuario: event.target.value\n    });\n    console.log(this.state.usuario_inicio);\n  }\n\n  c(event) {\n    //Para modificar la contraseña contra\n    this.setState({\n      contra: event.target.value\n    });\n    console.log(this.state.contra_inicio);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"inicio_sesion\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: this.state.usuario,\n                onChange: this.user,\n                name: \"usuario\",\n                className: \"form-control\",\n                placeholder: \"Escriba su usuario\",\n                autoFocus: true,\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                value: this.state.contra,\n                name: \"contra\",\n                onChange: this.contrasena,\n                className: \"form-control\",\n                placeholder: \"Escriba su contrase\\xF1a\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-danger\",\n              children: this.state.error\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"btn-group \",\n              role: \"group\",\n              \"aria-label\": \"Basic outlined button group\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: this.iniciar,\n                type: \"button\",\n                className: \"btn btn-outline-success\",\n                children: \"Iniciar sesion\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: this.registra,\n                type: \"button\",\n                className: \"btn btn-outline-success\",\n                children: \"Registrarse\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/root/easterworld/pruebas2/src/login.js"],"names":["React","Login","Component","constructor","props","state","value","usuario","contra","error","aux","contrasena","c","bind","user","u","iniciar","iniciar_sesion","registra","registrar","datos","FormData","append","fetch","method","body","then","res","json","result","localStorage","setItem","window","location","href","setState","console","log","event","target","usuario_inicio","contra_inicio","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './login.css';\r\n\r\nclass Login extends React.Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state={value:\"\", usuario:\"\", contra:\"\",error:\"\",aux:\"\" }\r\n\r\n    this.contrasena=this.c.bind(this);\r\n    this.user=this.u.bind(this);\r\n    this.iniciar=this.iniciar_sesion.bind(this);\r\n    this.registra=this.registrar.bind(this);\r\n  }\r\n\r\n  iniciar_sesion(){//Comprueba que el usuario este en la base de datos y coincida con la contraseña\r\n      var datos= new FormData();\r\n      datos.append('usuario', this.state.usuario);\r\n      datos.append('contra', this.state.contra);\r\n      fetch(\"http://159.223.172.191/iniciar_sesion.php\",{\r\n          method : \"POST\",\r\n          body: datos\r\n      })\r\n      .then(res=>res.json())\r\n          .then(\r\n              (result)=>{\r\n                  if(result==\"Correcto\"){\r\n                    localStorage.setItem(\"usuario\",this.state.usuario);\r\n                    \r\n                    window.location.href=\"/foro\";\r\n                  }\r\n                  else{\r\n                    this.setState({contra:\"\"});\r\n                    this.setState({error:\"El usuario o contraseña no son correctos\"});\r\n                  }\r\n              },\r\n              (error)=>{\r\n                  console.log(error);\r\n              }\r\n          )\r\n  }\r\n\r\n  registrar(){//Añade un usuario en la base de datos\r\n    var datos= new FormData();\r\n    datos.append('usuario', this.state.usuario);\r\n      datos.append('contra', this.state.contra);\r\n    fetch(\"http://159.223.172.191/anadir_usuario.php\",{\r\n        method : \"POST\",\r\n        body: datos\r\n    })\r\n    .then(res=>res.json())\r\n        .then(\r\n            (result)=>{\r\n              \r\n                if(result!=\"Disponible\"){\r\n                  this.setState({error:\"El usuario no esta disponible\"});\r\n                }\r\n                this.setState({contra:\"\"});\r\n            },\r\n            (error)=>{\r\n                console.log(error);\r\n            }\r\n        )\r\n  }\r\n\r\n  u(event){//Para modificar el usuario\r\n    this.setState({usuario:event.target.value});\r\n    console.log(this.state.usuario_inicio);\r\n  }\r\n  c(event){//Para modificar la contraseña contra\r\n    this.setState({contra:event.target.value});\r\n    console.log(this.state.contra_inicio);\r\n  }\r\n\r\n  \r\n\r\n  render(){\r\n    return (\r\n      <div className=\"App\" >\r\n            <div id='inicio_sesion'>\r\n              <div className=\"col-md-4\">\r\n                <div className=\"card card-body\">\r\n                  <div className=\"form-group\">\r\n                    <input type=\"text\" value={this.state.usuario} onChange={this.user} name=\"usuario\" className=\"form-control\" placeholder=\"Escriba su usuario\" autoFocus required/>\r\n                  </div>\r\n                  <br/>\r\n                  <div className=\"form-group\">\r\n                    <input type=\"password\" value={this.state.contra} name=\"contra\" onChange={this.contrasena} className=\"form-control\" placeholder=\"Escriba su contraseña\" required />\r\n                  </div>\r\n                  <br/>\r\n                  <p className=\"text-danger\">{this.state.error}</p>\r\n                  <div className=\"btn-group \" role=\"group\" aria-label=\"Basic outlined button group\">\r\n                    <button onClick={this.iniciar} type=\"button\" className=\"btn btn-outline-success\">Iniciar sesion</button>\r\n                    <button onClick={this.registra} type=\"button\" className=\"btn btn-outline-success\">Registrarse</button>                  \r\n                  </div>\r\n                </div>\r\n              </div>  \r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}